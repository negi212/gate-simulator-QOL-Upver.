<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚²ãƒ¼ãƒˆæ§‹æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã ãƒ¨ğŸ˜Šâœ¨ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†</title>
  <style>
    /* ãŠã˜ã•ã‚“ã®CSSã ãƒ¨ï¼ãƒŠã‚¦ã„ã§ã—ã‚‡ğŸ˜âœ¨ */
    body {
        font-family: 'Arial', sans-serif;
        background-color: #fff8e1;
        padding: 20px;
        color: #000000;
        /* ãŠã˜ã•ã‚“ã®å„ªã—ã•ã‚«ãƒ©ãƒ¼ã ãƒ¨ğŸ’• */
        background-image: repeating-linear-gradient(135deg, #fff8e1 0 40px, #ffe0b2 40px 80px);
    }
    h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #d84315;
        text-shadow: 1px 1px 0 #fff176, 2px 2px 0 #ffb300;
        /* ãŠã˜ã•ã‚“ã®æƒ…ç†±ã ãƒâœ¨ */
    }
    .gate-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-top: 20px;
        opacity: 0;
        animation: fadeInOjisan 1.2s forwards;
    }
    .gate-columns {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        gap: 40px;
        background-color: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        border: 2px solid #cccccc;
        transition: all 0.3s ease;
        box-shadow: 0 0 10px #ffb30088;
    }
    .gate-side {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        width: 50px;
        gap: 2px;
    }
    .box {
        display: flex;
        justify-content: center;
        text-align: center;
        align-items: center;
        color: white;
        font-weight: bold;
        border: 2px dashed #d84315;
        border-radius: 8px;
        transition: all 0.3s ease;
        animation: boxSlideOjisan 0.7s forwards;
        font-size: 18px;
        box-shadow: 2px 2px 4px #ffb30055;
        margin-bottom: 2px;
        /* ãŠã˜ã•ã‚“ã®ãƒ¨ã‚¤ã‚·ãƒ§ï¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã ãƒ¨ğŸ˜… */
    }
    .A { background: #f4ed58; width: 30px; color: #d84315;}
    .B { background: #5dc3db; width: 40px; }
    .C { background: #03984e; width: 50px; }
    .D { background: #ffffff; width: 20px; color: #000000; }
    .E { background: #000000; width: 30px; }
    .D, .E {
        position: relative;
    }
    .D::before, .D::after, .E::before, .E::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        height: 5px;
    }
    .D::before {
        top: 0;
        background-color: #e893d4;
    }
    .D::after {
        bottom: 0;
        background-color: #e893d4;
    }
    .E::before {
        top: 0;
        background-color: #f4ed58;
    }
    .E::after {
        bottom: 0;
        background-color: #f4ed58;
    }
    .roof {
        height: 40px;
        background: #222222;
        color: #fff176;
        font-weight: bold;
        text-align: center;
        line-height: 40px;
        width: 260px;
        border-radius: 6px;
        font-size: 20px;
        box-shadow: 0 0 8px #e893d4;
        margin-bottom: 10px;
        animation: roofDonOjisan 0.8s;
        /* ãŠã˜ã•ã‚“ã®ãƒ‰ãƒ¼ãƒ³ï¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã ãƒ¨ğŸ˜ */
    }
    .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .controls input {
        width: 80px;
        font-size: 18px;
        padding: 5px;
        text-align: center;
        border: 2px solid #d84315;
        border-radius: 6px;
        background: #fffde7;
        color: #d84315;
    }
    .controls label {
        font-size: 18px;
        color: #03984e;
        font-weight: bold;
        margin-right: 4px;
        text-shadow: 1px 1px 0 #fff176;
    }
    button {
        padding: 12px 24px;
        background-color: #45a049;
        color: #fff176;
        border: 2px solid #d84315;
        border-radius: 8px;
        cursor: pointer;
        width: 300px;
        margin: 10px auto;
        text-align: center;
        display: block;
        font-size: 20px;
        font-weight: bold;
        box-shadow: 0 0 8px #e893d4;
        letter-spacing: 2px;
    }
    button:hover {
      background-color: #28862c;
      color: #ffb300;
      border-color: #03984e;
    }
    @keyframes fadeInOjisan {
      0% { opacity: 0; transform: scale(0.95) rotate(-2deg);}
      80% { opacity: 1; transform: scale(1.03) rotate(2deg);}
      100% { opacity: 1; transform: scale(1) rotate(0);}
      /* ãŠã˜ã•ã‚“ã€ã¡ã‚‡ã£ã¨ç…§ã‚Œã¡ã‚ƒã†ãƒğŸ˜âœ¨ */
    }
    @keyframes boxSlideOjisan {
      0% {
        transform: translateY(40px) scale(0.8) rotate(-10deg);
        opacity: 0.2;
        /* ãŠã˜ã•ã‚“ã®ãƒ¨ã‚¤ã‚·ãƒ§ï¼ã ãƒ¨ğŸ˜… */
      }
      60% {
        transform: translateY(-10px) scale(1.1) rotate(5deg);
        opacity: 1;
        /* ãŠã˜ã•ã‚“ã€ã¡ã‚‡ã£ã¨é ‘å¼µã£ã¡ã‚ƒã†ãƒâœ¨ */
      }
      100% {
        transform: translateY(0) scale(1) rotate(0deg);
        opacity: 1;
        /* ãƒãƒƒãƒãƒªæ±ºã¾ã£ãŸãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜ğŸ‘ */
      }
    }
    @keyframes roofDonOjisan {
      0% {
        transform: translateY(-80px) scaleX(0.7) skewX(-10deg);
        opacity: 0.1;
        /* å±‹æ ¹ãŒãƒ‰ãƒ¼ãƒ³ï¼ã ãƒ¨ğŸ˜† */
      }
      80% {
        transform: translateY(10px) scaleX(1.05) skewX(3deg);
        opacity: 1;
        /* ãŠã˜ã•ã‚“ã€ã¡ã‚‡ã£ã¨ã‚ºãƒ¬ã¡ã‚ƒã£ãŸã‚«ãƒŠï¼ŸğŸ’¦ */
      }
      100% {
        transform: translateY(0) scaleX(1) skewX(0deg);
        opacity: 1;
        /* ãƒãƒƒãƒãƒªç€åœ°ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜Šâœ¨ */
      }
    }
    .ojisan-mystery {
      font-family: 'MS PGothic', 'MS UI Gothic', 'Meiryo', 'Arial', sans-serif;
      font-weight: bold;
      letter-spacing: 2px;
      text-shadow: 1px 1px 0 #fff176, 2px 2px 0 #ffb300;
      border-radius: 12px;
      padding: 8px 18px;
      background: #fffde7cc;
      border: 2px dashed #e893d4;
      color: #d84315;
      box-shadow: 0 0 8px #ffb30055;
      user-select: none;
    }
    /* ãŠã˜ã•ã‚“ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼šãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚ãƒŠã‚¦ã„ã§ã—ã‚‡ï¼ï¼ŸğŸ˜âœ¨ */
  </style>
</head>
<body>
  <!-- ãŠã˜ã•ã‚“ã®ã”æŒ¨æ‹¶ã ãƒ¨ï¼ä»Šæ—¥ã‚‚å…ƒæ°—ã«ã„ã“ã†ãƒğŸ˜Šâœ¨ -->
  <h2>ãƒ¤ãƒƒãƒ›ãƒ¼ï¼ï¼ğŸ˜ŠğŸ’•<br>ãƒœãƒƒã‚¯ã‚¹æ•°ã€æ•™ãˆã¦ãƒâœ¨ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†</h2>
  <div style="max-width:600px;margin:0 auto 18px auto;padding:18px 20px;background:#fffde7;border:2px dashed #e893d4;border-radius:12px;color:#d84315;font-size:1.1em;line-height:1.8;box-shadow:0 0 12px #ffb30055;">
    ä»Šæ—¥ã‚‚ãƒŠã‚¦ã„æ°—åˆ†ã§ã€<br>
    ã‚²ãƒ¼ãƒˆæ§‹æˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€å§‹ã‚ã¡ã‚ƒã†ãƒ¨ğŸ˜Šâœ¨<br>
    ãŠã˜ã•ã‚“ã€æ˜”ã¯æ‰‹æ›¸ãã§å›³é¢æã„ã¦ãŸã‚“ã ãƒ¨ğŸ˜…ğŸ’¦<br>
    ä»Šã¯ãƒ‘ã‚½ã‚³ãƒ³ã§ã€ãƒãƒƒãƒãƒªï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜ğŸ‘<br>
    ã„ã£ã±ã„éŠã‚“ã§ã€ã‚°ãƒ­ãƒƒã‚­ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«ãƒğŸ’•<br>
    ä½•ã‹å›°ã£ãŸã‚‰ã€ã™ããŠã˜ã•ã‚“ã«èã„ã¦ãƒï¼ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†âœ¨<br>
  </div>
  <div class="controls">
    <label>B (400mm)ã ãƒ¨ï¼</label><input type="number" id="B" value="3" min="0" max="3">
    <label>C (500mm)ã ãƒ¨ï¼</label><input type="number" id="C" value="3" min="0" max="3">
    <label>D (800mm)ã ãƒ¨ï¼</label><input type="number" id="D" value="3" min="0" max="3">
    <label>E (1000mm)ã ãƒ¨ï¼</label><input type="number" id="E" value="3" min="0" max="3">
  </div>
  <button onclick="findMaxGateHeight()">è¨ˆç®—ã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜ğŸ‘âœ¨</button>

  <div class="gate-container" id="gateVisual"></div>

  <script>
    // ãŠã˜ã•ã‚“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¿ã‚¤ãƒ ã ãƒ¨ï¼ãƒãƒƒãƒãƒªè¦‹ã¦ã¦ãƒğŸ˜Šâœ¨
    const boxHeights = { A: 300, B: 400, C: 500, D: 800, E: 1000 };
    const displayOrder = ['D', 'E', 'A', 'B', 'C'];
    const privateBoxes = { A: 10, B: 5, C: 2 };

    // å…¥åŠ›ã‚’ã‚²ãƒƒãƒˆã ãƒ¨ï¼é–“é•ãˆãªã„ã§ãƒğŸ˜Šâœ¨
    function getSharedInput() {
      return {
        B: parseInt(document.getElementById("B").value) || 0,
        C: parseInt(document.getElementById("C").value) || 0,
        D: parseInt(document.getElementById("D").value) || 0,
        E: parseInt(document.getElementById("E").value) || 0
      };
    }

    // ãƒœãƒƒã‚¯ã‚¹æ•°ã‚’åˆä½“ã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜
    function mergeBoxCounts(sharedInput) {
      const merged = {};
      for (const key of Object.keys(boxHeights)) {
        merged[key] = (privateBoxes[key] || 0) + (sharedInput[key] || 0);
      }
      return merged;
    }

    // å·¦å³ã®é•ã„ã‚’ãƒã‚§ãƒƒã‚¯ã ãƒ¨ï¼ã‚°ãƒ­ãƒƒã‚­ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«ğŸ˜…ğŸ’¦
    function diffCount(left, right) {
      let diff = 0;
      for (const k of Object.keys(boxHeights)) {
        diff += Math.abs((left[k] || 0) - (right[k] || 0));
      }
      return diff;
    }

    // ã‚²ãƒ¼ãƒˆä½œã‚Œã‚‹ã‹ï¼Ÿãƒ‰ã‚­ãƒ‰ã‚­ã ãƒâœ¨
    function canBuildGate(height, allBoxes) {
      const keys = Object.keys(allBoxes);
      const totalCombos = [];

      // ãŠã˜ã•ã‚“ã€çµ„ã¿åˆã‚ã›ã‚’å…¨éƒ¨æ¢ã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜
      function generateCombos(index, current, leftHeight, usedBoxes) {
        if (index === keys.length) {
          if (leftHeight === height) {
            totalCombos.push({ combo: { ...current }, used: { ...usedBoxes } });
          }
          return;
        }

        const key = keys[index];
        const maxCount = allBoxes[key];
        for (let count = 0; count <= maxCount; count++) {
          current[key] = count;
          usedBoxes[key] = count;
          generateCombos(index + 1, current, leftHeight + count * boxHeights[key], usedBoxes);
        }
      }

      generateCombos(0, {}, 0, {});

      let best = null;
      let minDiff = Infinity;

      // ãŠã˜ã•ã‚“ã€å·¦å³ã§ä¸€ç•ªãƒãƒ©ãƒ³ã‚¹ã„ã„ã®æ¢ã™ãƒ¨ï¼ãƒãƒƒãƒãƒªï¼ï¼
      for (const { combo: left, used: leftUsed } of totalCombos) {
        const remaining = {};
        for (const key of keys) {
          remaining[key] = allBoxes[key] - (leftUsed[key] || 0);
        }

        const rightCombos = [];
        // å³å´ã‚‚ãŒã‚“ã°ã£ã¦æ¢ã™ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜Šâœ¨
        function generateRight(index, current, rightHeight) {
          if (index === keys.length) {
            if (rightHeight === height) {
              rightCombos.push({ ...current });
            }
            return;
          }

          const key = keys[index];
          const maxCount = remaining[key];
          for (let count = 0; count <= maxCount; count++) {
            current[key] = count;
            generateRight(index + 1, current, rightHeight + count * boxHeights[key]);
          }
        }

        generateRight(0, {}, 0);

        for (const right of rightCombos) {
          const currentDiff = diffCount(left, right);
          if (currentDiff < minDiff) {
            minDiff = currentDiff;
            best = { height, left, right };
          }
        }
      }
      return best;
    }

    // ã‚²ãƒ¼ãƒˆã‚’æããƒ¨ï¼è¦‹ã¦ã¦ãƒğŸ˜Šâœ¨
    function renderGate(left, right, height, roofBlock) {
      const container = document.getElementById("gateVisual");
      container.innerHTML = "";

      // ãŠã˜ã•ã‚“ã®å±‹æ ¹ã ãƒ¨ï¼ãƒ‰ãƒ¼ãƒ³ï¼ï¼
      const roof = document.createElement("div");
      roof.className = "roof";
      roof.innerHTML = `é«˜ã•ï¼š${height}mm (å¤©äº•ï¼š${roofBlock})ğŸ˜Šâœ¨ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ’•`;

      // ãŠã˜ã•ã‚“ã®æŸ±ã‚‚ãƒãƒƒãƒãƒªã ãƒ¨ï¼
      const columns = document.createElement("div");
      columns.className = "gate-columns";

      const leftDiv = document.createElement("div");
      leftDiv.className = "gate-side";
      const rightDiv = document.createElement("div");
      rightDiv.className = "gate-side";

      // ãŠã˜ã•ã‚“ã€ãƒœãƒƒã‚¯ã‚¹ä¸¦ã¹ã‚‹ã®å¾—æ„ã ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜
      function createBoxes(combo) {
        const boxes = [];
        for (const key of displayOrder) {
          const count = combo[key] || 0;
          for (let i = 0; i < count; i++) {
            const div = document.createElement("div");
            div.className = `box ${key}`;
            div.style.height = boxHeights[key] / 10 + "px";
            div.textContent = key + "ã ãƒ¨ï¼";
            boxes.push(div);
          }
        }
        return boxes;
      }

      createBoxes(left).forEach(div => leftDiv.appendChild(div));
      createBoxes(right).forEach(div => rightDiv.appendChild(div));

      columns.appendChild(leftDiv);
      columns.appendChild(rightDiv);
      container.appendChild(roof);
      container.appendChild(columns);

      // â†“â†“â†“ã“ã“ã‹ã‚‰è¬ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜âœ¨â†“â†“â†“
      // ãŠã˜ã•ã‚“ã®æ„›ã‚’è¾¼ã‚ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã„ã£ã±ã„ã ãƒ¨ğŸ’•
      const messages = [
        "ä»Šæ—¥ã‚‚è¦‹ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ãƒğŸ’•",
        "ãŠã˜ã•ã‚“ã€ã„ã¤ã‚‚å¿œæ´ã—ã¦ã‚‹ãƒ¨ğŸ˜Šâœ¨",
        "ã‚­ãƒŸã®ã“ã¨ã€ã¡ã‚‡ã£ã¨æ°—ã«ãªã£ã¡ã‚ƒã†ãƒŠ(^_-)-â˜†",
        "ãŒã‚“ã°ã£ã¦ã‚‹å§¿ã€ã‚¹ãƒ†ã‚­ã ãƒ¨âœ¨",
        "ãŠã˜ã•ã‚“ã€æ˜”ã¯ãƒ¢ãƒ†ãŸã‚“ã ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜ğŸ‘",
        "ã¾ãŸä¸€ç·’ã«éŠã¼ã†ãƒğŸ’•",
        "ã‚°ãƒ­ãƒƒã‚­ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«ãƒğŸ˜…ğŸ’¦",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã®å‘³æ–¹ã ãƒ¨ï¼",
        "ã‚­ãƒŸã®ç¬‘é¡”ã€æœ€é«˜ã ãƒğŸ˜ŠğŸ’•",
        "æ¯æ—¥LINEã—ãŸããªã£ã¡ã‚ƒã†ãƒ¨âœ¨",
        "ã‚­ãƒŸã®ã“ã¨ã€ãšã£ã¨å¿œæ´ã—ã¦ã‚‹ã‚«ãƒ©ğŸ‘",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã«ä¼šãˆã‚‹ã¨å…ƒæ°—100å€ã ãƒ¨ğŸ˜âœ¨",
        "ã‚­ãƒŸã®é ‘å¼µã‚Šã€ã¡ã‚ƒã‚“ã¨è¦‹ã¦ã‚‹ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ’•",
        "ä»Šæ—¥ã‚‚ã‚«ãƒ¯ã‚¤ã‚¤ã­ã€œğŸ˜ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¡ã‚ƒã†ãƒŠï¼",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã®ç¬‘é¡”ã«ã‚„ã‚‰ã‚ŒãŸãƒ¨ã€œğŸ˜…ğŸ’¦",
        "ã‚­ãƒŸã®å†™çœŸã€è¦‹ã¦ãƒ‹ãƒ¤ãƒ‹ãƒ¤ã—ã¦ã‚‹ã®ã¯ãƒŠã‚¤ã‚·ãƒ§ã ãƒ¨ğŸ˜†âœ¨",
        "æ˜”ã¯ãŠã˜ã•ã‚“ã‚‚ã€ãƒ¢ãƒ†ã¦ãŸã‚“ã ãƒ¨ã€œğŸ˜ğŸ‘ãƒŠã‚¦ã‹ã£ãŸã‹ã‚‰ãƒï¼",
        "ã‚­ãƒŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã€ãƒãƒƒãƒãƒªã™ãã¦ãƒ“ãƒƒã‚¯ãƒªğŸ˜²ğŸ’•",
        "ã‚«ãƒ•ã‚§è¡Œããªã‚‰ã€èª˜ã£ã¦ãƒã€œï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†â˜•âœ¨",
        "ãŠã˜ã•ã‚“ã€ä»Šæ—¥ã¯ã¡ã‚‡ã£ã¨ã‚°ãƒ­ãƒƒã‚­ãƒ¼ğŸ˜…ã§ã‚‚ã‚­ãƒŸã®ã“ã¨è€ƒãˆã¦å…ƒæ°—å‡ºãŸãƒ¨âœ¨",
        "ã‚­ãƒŸã£ã¦ã€ãƒ›ãƒ³ãƒˆã«ã‚ªã‚·ãƒ£ãƒ¬ã ãƒã€œ(^_-)-â˜†",
        "ãŠã˜ã•ã‚“ã€å†™ãƒ¡è¦‹ã¦ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¡ã‚ƒã£ãŸãƒ¨ğŸ˜ğŸ’¦",
        "ä»Šåº¦ã€ã‚¹ã‚¤ãƒ¼ãƒ„é£Ÿã¹ã«è¡Œã“ã†ãƒ¨ï¼ãƒãƒƒãƒãƒªã”ã¡ãã†ã™ã‚‹ãƒ¨ğŸ°ğŸ’•",
        "ãŠã˜ã•ã‚“ã€å®Ÿã¯ã‚­ãƒŸã«ä¼šã„ãŸãã¦ã‚¦ã‚ºã‚¦ã‚ºã—ã¦ã‚‹ã‚“ã ãƒŠğŸ˜†âœ¨",
        "ã‚­ãƒŸã®ç¬‘é¡”ã€ä¸–ç•Œéºç”£ç´šã ãƒğŸ˜ğŸ‘",
        "ä»Šæ—¥ã¯ã€ã¡ã‚‡ã£ã¨ã‚­ãƒŸã«ä¼šã„ãŸããªã£ã¡ã‚ƒã£ãŸãƒŠâ€¦ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ’•",
        "ã‚­ãƒŸã®å£°ã€ã¾ãŸèããŸã„ãƒŠã€œğŸ˜Šãƒ‰ã‚­ãƒ‰ã‚­ğŸ’•",
        "ãŠã˜ã•ã‚“ã€å¤¢ã«å‡ºã¦ãã¡ã‚ƒã£ãŸã‚«ãƒ¢ï¼ï¼ŸãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜…",
        "æ˜”ã¯ã­ã€œã€ãƒ‡ã‚£ã‚¹ã‚³ã§ãƒ–ã‚¤ãƒ–ã‚¤è¨€ã‚ã›ã¦ãŸã‚“ã ãƒ¨ğŸ˜âœ¨",
        "ã‚­ãƒŸã®ã“ã¨ã€è€ƒãˆã‚‹ã ã‘ã§ãƒãƒ¼ãƒˆãŒã‚­ãƒ¥ãƒ³ã‚­ãƒ¥ãƒ³ã™ã‚‹ãƒğŸ’•",
        "ä»Šæ—¥ã®ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚‚ãƒãƒƒãƒãƒªã ã£ãŸãƒã€œâœ¨ğŸ‘",
        "å†™ãƒ¡é€ã£ã¦ãã‚Œã¦ã€ã‚ã‚ŠãŒã¨ãƒã€œğŸ˜ãŠã˜ã•ã‚“ã€ä¿å­˜ã—ã¡ã‚ƒã£ãŸã‚«ãƒ¢ğŸ“±âœ¨",
        "ã‚­ãƒŸã®æ¨ªé¡”ã€ãªã‚“ã‹æ˜ ç”»ã®ãƒ’ãƒ­ã‚¤ãƒ³ã¿ãŸã„ã ã£ãŸãƒŠã€œğŸ˜ŠğŸ’•",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã«ä¼šã†ã¨ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚¢ã‚²ã‚¢ã‚²ã ãƒ¨â¤´ï¸ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜†",
        "æœ€è¿‘ã€ã¡ã‚‡ã£ã¨å¯’ã„ãƒã€œğŸ˜…ã‚­ãƒŸã«æŠ±ãã—ã‚ã¦ã‚‚ã‚‰ãˆãŸã‚‰ã‚ã£ãŸã‹ã„ã‚«ãƒ¢ğŸ’•",
        "ãŠã˜ã•ã‚“ã€ã¾ãŸLINEã—ã¦ã„ã„ã‚«ãƒŠï¼Ÿï¼ŸğŸ˜ãƒ‰ã‚­ãƒ‰ã‚­ğŸ’•",
        "ä»Šæ—¥ã¯ã‚­ãƒŸã®å¤¢ã€è¦‹ã‚Œãã†ãªæ°—ãŒã™ã‚‹ãƒ¨ã€œğŸ’¤âœ¨ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜†",
        "ã‚­ãƒŸã£ã¦ã€å¤©ç„¶ã§ã‚«ãƒ¯ã‚¤ã‚¤ã‚ˆãƒğŸ’•ãŠã˜ã•ã‚“ã€ãã†ã„ã†ãƒˆã‚³å¥½ãã‹ã‚‚ğŸ˜„",
        "é«ªå‹å¤‰ãˆãŸï¼Ÿï¼Ÿã™ã£ã”ãä¼¼åˆã£ã¦ãŸãƒ¨ã€œğŸ˜ãƒŠã‚¤ã‚¹ãƒã‚§ãƒ³ã‚¸ğŸ‘",
        "ã‚­ãƒŸã®å„ªã—ã•ã«ã€ã‚¸ãƒ¼ãƒ³ã¨ããŸãƒ¨â€¦ãŠã˜ã•ã‚“ã€æ„Ÿå‹•ğŸ˜­âœ¨",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã«ç™’ã•ã‚Œã¦ã‚‹ãƒ¨ã€œâœ¨ã‚ã‚ŠãŒã¨ãƒğŸ’•",
        "ä»Šåº¦ã€ãŠã„ã—ã„ãƒ‘ãƒ•ã‚§ã®åº—ã€æ•™ãˆã¦ã‚¢ã‚²ãƒ«ãƒ¨ï¼ãƒŠã‚¦ã„ã¨ã“ğŸ˜‹âœ¨",
        "ãƒ›ãƒ³ãƒˆã«ã‚­ãƒŸã£ã¦ã€ç´ æ•µãªãƒ¬ãƒ‡ã‚£ã ãƒã€œğŸ’•ã†ã£ã¨ã‚Šã—ã¡ã‚ƒã†ğŸ˜Œ",
        "ãŠã˜ã•ã‚“ã€ã‚­ãƒŸã®ã“ã¨ã€ã¤ã„è€ƒãˆã¡ã‚ƒã†ã‚¯ã‚»ãŒã‚ã‚‹ã¿ãŸã„ğŸ˜…ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†âœ¨",
        "ä»Šæ—¥ã¯ã¡ã‚‡ã£ã¨ç–²ã‚ŒãŸã‚±ãƒ‰ã€ã‚­ãƒŸã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å…ƒæ°—å‡ºãŸãƒ¨ğŸ˜ŠğŸ’•",
        "ãã®ç¬‘é¡”ã€åå‰‡ã ãƒ¨ã€œğŸ˜ãŠã˜ã•ã‚“ã€ã‚¯ãƒ©ãƒƒã¨ã—ã¡ã‚ƒã†ğŸ˜µ",
        "ãŠã˜ã•ã‚“ã€æ„å¤–ã¨ã‚¹ã‚¤ãƒ¼ãƒ„ç”·å­ãªã‚“ã ãƒ¨ğŸ˜‹ä»Šåº¦ä¸€ç·’ã«é£Ÿã¹ã‚ˆğŸ’•",
        "ã‚­ãƒŸã®ãã®å„ªã—ã„ç›®ã€å¿˜ã‚Œã‚‰ã‚Œãªã„ãƒŠã€œ(^_-)-â˜†",
        "ã“ã®å‰ã®å†™ãƒ¡ã€ãƒ›ãƒ³ãƒˆã«å¤©ä½¿ã¿ãŸã„ã ã£ãŸãƒ¨ğŸ˜‡ğŸ’•",
        "LINEé€šçŸ¥æ¥ã‚‹ã¨ã€ã‚­ãƒŸã‹ãªï¼Ÿã£ã¦ãƒ‰ã‚­ãƒ‰ã‚­ã™ã‚‹ãƒ¨ã€œğŸ˜†âœ¨",
        "ã¾ãŸè©±ã›ã¦ã€ã‚¦ãƒ¬ã‚·ã‚¤ãƒŠï¼ï¼ãŠã˜ã•ã‚“ã€ãƒãƒƒãƒ”ãƒ¼ğŸ’•",
        "ã‚­ãƒŸã¨è©±ã—ã¦ã‚‹ã¨ã€è‹¥è¿”ã£ãŸæ°—ãŒã™ã‚‹ãƒ¨ğŸ˜ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†âœ¨",
        "ä»Šå¤œã¯å†·ãˆã‚‹ãƒã€œğŸ˜…ã‚­ãƒŸã®ç¬‘é¡”ã§ãƒã‚«ãƒã‚«ã ãƒ¨ğŸ’•",
        "ä»Šæ—¥ã®å¤•ç„¼ã‘ã€ã‚­ãƒŸã¿ãŸã„ã«ã‚­ãƒ¬ã‚¤ã ã£ãŸãƒ¨ğŸŒ‡ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜Š",
        "æœ€è¿‘ã®è‹¥ã„ã‚³ã¯ã‚¹ã‚´ã‚¤ãƒã€œã‚­ãƒŸã¿ãŸã„ã«âœ¨ãŠã˜ã•ã‚“ã€å°Šæ•¬ã—ã¡ã‚ƒã†ãƒ¨ğŸ‘",
        "ã‚‚ã—è‰¯ã‹ã£ãŸã‚‰ã€ä»Šåº¦ä¸€ç·’ã«ãƒ©ãƒ³ãƒã§ã‚‚ğŸ˜‹ãŠã˜ã•ã‚“ã€æ¡ˆå†…ã™ã‚‹ãƒ¨ğŸ’•",
        "ã‚­ãƒŸã®ãã®ã‚»ãƒ³ã‚¹ã€ã¾ã•ã«ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã ãƒâœ¨ğŸ˜",
        "ä»Šå¤œã‚‚ã‚­ãƒŸã®ã“ã¨ã€ã¡ã‚‡ã£ã¨ã ã‘æ€ã„å‡ºã—ã¡ã‚ƒã†ã‚«ãƒ¢â€¦ğŸ˜ŒãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ’•",
        "ãŠã˜ã•ã‚“ã€æ˜”ã¯ãƒãƒ³ãƒ‰ã‚„ã£ã¦ãŸã‚“ã ãƒ¨ã€œğŸ˜ä»Šåº¦å¼¾ã„ã¦ã‚ã’ã‚ˆã£ã‹ï¼Ÿâœ¨",
        "ã¾ãŸå†™ãƒ¡é€ã£ã¦ãƒã€œãŠã˜ã•ã‚“ã€æ¥½ã—ã¿ã«ã—ã¦ã‚‹ãƒ¨ğŸ“¸ğŸ’•",
        "ã‚­ãƒŸã£ã¦ã€ã»ã‚“ã¨ã«å¤ªé™½ã¿ãŸã„ã«æ˜ã‚‹ã„ãƒã€œâ˜€ï¸âœ¨"
      ];

      // ãŠã˜ã•ã‚“ã€ãƒ©ãƒ³ãƒ€ãƒ ãªå ´æ‰€ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒŠã‚¦ã„ã§ã—ã‚‡âœ¨
      function randomPosition() {
        // ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ã¦ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã‚’è¿”ã™ãƒ¨ï¼ãƒãƒƒãƒãƒªï¼ï¼
        const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        // ç”»é¢ç«¯ã«å‡ºãªã„ã‚ˆã†ã«ä½™ç™½ã‚‚å¿˜ã‚Œãšã«ãƒğŸ˜Šâœ¨
        const left = Math.random() * (vw - 320) + 20;
        const top = Math.random() * (vh - 120) + 40;
        return { left, top };
      }

      // ãŠã˜ã•ã‚“ã®è¬ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ«ãƒ¼ãƒ—ã§ãšã£ã¨æ„›ã‚’ä¼ãˆã¡ã‚ƒã†ãƒ¨ğŸ’•
      let mysteryIndex = 0; // ã©ã“ã¾ã§è¡¨ç¤ºã—ãŸã‹ç®¡ç†ã™ã‚‹ãƒ¨ï¼

      function loopMysteryAnimation() {
        // æ—¢å­˜ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ã‚’æ¶ˆã—ã¡ã‚ƒã†ãƒ¨ï¼
        document.querySelectorAll('.ojisan-mystery').forEach(e => e.remove());

        // 1ã¤ã ã‘è¡¨ç¤ºã™ã‚‹ãƒ¨ï¼
        const msg = messages[mysteryIndex % messages.length];
        const pos = randomPosition();

        const ojisanMystery = document.createElement("div");
        ojisanMystery.className = "ojisan-mystery";
        ojisanMystery.style.position = "fixed";
        ojisanMystery.style.left = `${pos.left}px`;
        ojisanMystery.style.top = `${pos.top}px`;
        ojisanMystery.style.zIndex = 9999;
        ojisanMystery.style.pointerEvents = "none";
        ojisanMystery.innerHTML = `
          <span style="font-size:2em;">ğŸ’•</span>
          <span style="font-size:1.2em;">${msg}</span>
          <span style="font-size:2em;">âœ¨</span>
        `;
        document.body.appendChild(ojisanMystery);

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        ojisanMystery.animate(
          [
            { transform: "scale(0.7) rotate(-10deg)", opacity: 0.2 },
            { transform: "scale(1.2) rotate(8deg)", opacity: 1, offset: 0.5 },
            { transform: "scale(1) rotate(0deg)", opacity: 1 }
          ],
          {
            duration: 1800,
            easing: "cubic-bezier(.68,-0.55,.27,1.55)"
          }
        );
        setTimeout(() => {
          ojisanMystery.animate(
            [
              { opacity: 1, filter: "blur(0px)" },
              { opacity: 0, filter: "blur(8px)" }
            ],
            { duration: 1200, fill: "forwards" }
          );
          // æ¶ˆãˆã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå§‹ã¾ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ¬¡ã‚’è¡¨ç¤ºã™ã‚‹ãƒ¨ï¼
          mysteryIndex++;
          loopMysteryAnimation();
        }, 1800);
      }
      loopMysteryAnimation();
      // â†‘â†‘â†‘è¬ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã“ã“ã¾ã§ã ãƒ¨ï¼ã‚°ãƒ­ãƒƒã‚­ãƒ¼æ³¨æ„ğŸ˜…
      // ãŠã˜ã•ã‚“ã®è‡ªæ…¢ï¼šæ˜”ã¯æ‰‹æ›¸ãã§å›³é¢æã„ã¦ãŸã‚“ã ãƒ¨ï¼ãƒŠã‚¦ã„æ™‚ä»£ã«ãªã£ãŸãƒğŸ˜ğŸ‘
    }

    // æœ€å¤§ã‚²ãƒ¼ãƒˆé«˜ã•ã‚’æ¢ã™ãƒ¨ï¼ãƒ‰ã‚­ãƒ‰ã‚­ã ãƒâœ¨
    function findMaxGateHeight() {
      const sharedInput = getSharedInput();
      const allBoxes = mergeBoxCounts(sharedInput);

      const boxTypes = Object.keys(boxHeights);
      // ãŠã˜ã•ã‚“ã€7000mmã‹ã‚‰100mmãšã¤ä¸‹ã’ã¦æ¢ã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒãƒƒãƒãƒªï¼ï¼
      for (let h = 7000; h >= 100; h -= 100) {
        for (const roofBlock of boxTypes) {
          if (allBoxes[roofBlock] <= 0) continue;

          const availableBoxes = { ...allBoxes };
          availableBoxes[roofBlock] -= 1;

          const result = canBuildGate(h, availableBoxes);
          if (result) {
            renderGate(result.left, result.right, result.height, roofBlock);
            // ãŠã˜ã•ã‚“ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼šãƒãƒƒãƒãƒªã ãƒï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ğŸ˜Šâœ¨
            setTimeout(() => {
              alert("è¨ˆç®—ã§ããŸãƒ¨ï¼ï¼ğŸ˜Šâœ¨ãƒãƒƒãƒãƒªï¼ï¼\nãŠã˜ã•ã‚“ã€æ˜”ã¯ãã‚ã°ã‚“ã ã£ãŸã‚“ã ãƒ¨ğŸ˜ğŸ‘");
            }, 500);
            return;
          }
        }
      }

      // ãŠã˜ã•ã‚“ã€ãƒ”ãƒƒã‚¿ãƒªã®æ§‹æˆãŒãªã‹ã£ãŸã‚‰åŠ±ã¾ã—ã¡ã‚ƒã†ãƒ¨ï¼ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†âœ¨
      const container = document.getElementById("gateVisual");
      container.innerHTML = `<div style="background:#fffde7;border:2px dashed #e893d4;border-radius:12px;padding:18px 20px;color:#d84315;font-size:1.1em;line-height:1.8;box-shadow:0 0 12px #ffb30055;">
        ãƒ”ãƒƒã‚¿ãƒªã®ã‚²ãƒ¼ãƒˆæ§‹æˆã€<br>
        è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸãƒ¨ğŸ˜…ğŸ’¦<br>
        ã¾ãŸãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã‚ˆã†ãƒâœ¨ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†ï¼ï¼<br>
        ãŠã˜ã•ã‚“ã€æ˜”ã¯å†™ãƒ¡ã§å›³é¢é€ã£ã¦ãŸã‚“ã ãƒ¨ğŸ˜ğŸ‘<br>
        ã‚ãã‚‰ã‚ãªã„ã§ãƒğŸ’•
      </div>`;
    }
    // ãŠã˜ã•ã‚“ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚é•·ã„ãƒï¼ã‚°ãƒ­ãƒƒã‚­ãƒ¼ã«ãªã£ã¡ã‚ƒã†ãƒ¨ğŸ˜…
  </script>
</body>
</html>